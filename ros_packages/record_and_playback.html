<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Record And Playback &mdash; Interbotix X-Series Arms Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tr_style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.webp"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Arm Diagnostic Tool" href="arm_diagnostic_tool.html" />
    <link rel="prev" title="Joystick Control" href="joystick_control.html" />
   
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe
    src="https://www.googletagmanager.com/ns.html?id=GTM-PZQLS2V"
    height="0"
    width="0"
    style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo_xsarms.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../specifications/index.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros_interface/index.html">ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_ros_interface/index.html">Python-ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab_ros_interface/index.html">MATLAB-ROS Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">ROS Open Source Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="arm_descriptions.html">Arm Descriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="arm_control.html">Arm Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo_simulation_configuration.html">Gazebo Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_control.html">ROS Controllers Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_motion_planning_configuration.html">MoveIt Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="perception_pipeline_configuration.html">Perception Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_interface_and_api.html">MoveIt Interface and API</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_demos.html">Python Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="matlab_demos.html">MATLAB Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="joystick_control.html">Joystick Control</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Record And Playback</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-tutorial">Video Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#record-playback-x-series-arm-demo">Record &amp; Playback X-Series Arm Demo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="arm_diagnostic_tool.html">Arm Diagnostic Tool</a></li>
<li class="toctree-l2"><a class="reference internal" href="arm_diagnostic_listener.html">Arm Diagnostic Listener</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid_gains_test_environment.html">PID Gains Test Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="arm_puppeteering.html">Arm Puppeteering</a></li>
<li class="toctree-l2"><a class="reference internal" href="dual_arm_control.html">Dual Arm Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="dual_arm_joystick_control.html">Dual Arm Joystick Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#contributing">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ros2_packages/index.html">ROS 2 Open Source Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Interbotix X-Series Manipulators Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">ROS Open Source Packages</a></li>
      <li class="breadcrumb-item active">Record And Playback</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TrossenRobotics/interbotix_xsarms_docs/blob/main/ros_packages/record_and_playback.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="record-and-playback">
<h1>Record And Playback<a class="headerlink" href="#record-and-playback" title="Permalink to this heading"></a></h1>
<a href="https://github.com/Interbotix/interbotix_ros_manipulators/tree/main/interbotix_ros_xsarms/examples/interbotix_xsarm_puppet"
    class="docs-view-on-github-button"
    target="_blank">
    <img src="../_static/GitHub-Mark-Light-32px.png"
        class="docs-view-on-github-button-gh-logo">
    View Package on GitHub
</a><div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>Imagine that you would like to have the robot arm perform some motions to achieve a specific task.
One way of doing this would be to create a <a class="reference external" href="http://docs.ros.org/melodic/api/trajectory_msgs/html/msg/JointTrajectory.html" rel="noopener noreferrer" target="_blank">JointTrajectory</a> of desired joint positions at
specific times which you could then command the robot. Alternatively (and much less time
consuming), you could manually manipulate the arm to do the specific motions and record them in a
ROS bag file. Then, you could ‘play back’ the bag file as many times as you like to repeat the
motions on the same robot later. This ‘record/playback’ feature is made possible by the
<strong>xsarm_puppet_single</strong>.</p>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this heading"></a></h2>
<p>As shown below, the <cite>interbotix_xsarm_puppet</cite> package builds on top of the
<cite>interbotix_xsarm_control</cite> package. To get familiar with that package, please look at its README.
The nodes specific to this package are described below.</p>
<img alt="../_images/xsarm_puppet_single_flowchart.png" class="align-center" src="../_images/xsarm_puppet_single_flowchart.png" />
<p>The above diagram shows the structure for the ‘record/playback’ feature. The two
nodes involved are:</p>
<ul class="simple">
<li><strong>xsarm_puppet_single</strong> - responsible for reading the arm’s current joint states and publishing
them as position commands to the <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/commands/joint_group</span></code> and
<code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/commands/joint_single</span></code> topics. Conveniently, as the arm is torqued off so that
the user can manipulate it, the joints will not act upon these commands</li>
<li><strong>record</strong> - responsible for recording the two topics mentioned above in a bag file so that
they can be played back later</li>
<li><strong>play</strong> - responsible for playing back the bag file mentioned above with the arm in a torqued
on state; the playback is delayed 3 seconds to give time for the <strong>xs_sdk</strong> node to load</li>
</ul>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>To record joint commands while manipulating a single robot (let’s say the PincherX-150), type the
following in a terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch interbotix_xsarm_puppet xsarm_puppet_single.launch robot_model:<span class="o">=</span>px150 record:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>Once the nodes finish launching, manually manipulate the arm and gripper through your desired
motions. When done, return the robot to its initial starting position and <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">C</kbd>
the nodes so that rosbag stops recording. By default, the bag file will be saved in the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/blob/main/interbotix_ros_xsarms/examples/interbotix_xsarm_puppet/bag" rel="noopener noreferrer" target="_blank">bag</a>
directory. To playback the motion, type the following in the terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch interbotix_xsarm_puppet xsarm_puppet_single.launch robot_model:<span class="o">=</span>px150 playback:<span class="o">=</span><span class="nb">true</span>
</pre></div>
</div>
<p>If you specified a custom bag file name, make sure to include the name in the above command as
well. When the bag file finishes playing, you can restart it by navigating to the directory where
the bag file is located and in a terminal, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>rosbag play &lt;bag file name&gt;
</pre></div>
</div>
<p>The robot should now repeat the motions. When done, <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">C</kbd> to stop all nodes. To
see other command line arguments for the ‘xsarm_puppet_single.launch’ file, refer to the table
below.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="20%" />
<col width="60%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>robot_model</td>
<td>model type of the Interbotix Arm such as ‘wx200’ or ‘rx150’</td>
<td>“”</td>
</tr>
<tr class="row-odd"><td>robot_name</td>
<td>name of the robot (typically equal to <code class="docutils literal notranslate"><span class="pre">robot_model</span></code>, but could be anything)</td>
<td>$(arg robot_model)</td>
</tr>
<tr class="row-even"><td>base_link_frame</td>
<td>name of the ‘root’ link on the arm; typically ‘base_link’, but can be changed if attaching the arm to a mobile base that already has a ‘base_link’ frame</td>
<td>base_link’</td>
</tr>
<tr class="row-odd"><td>use_rviz</td>
<td>launches RViz</td>
<td>true</td>
</tr>
<tr class="row-even"><td>record</td>
<td>record joint commands while physically manipulating the arm to a bagfile</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>playback</td>
<td>play-back joint commands from a bagfile to a torqued on arm</td>
<td>false</td>
</tr>
<tr class="row-even"><td>bag_name</td>
<td>Desired ROS bag file name</td>
<td>$(arg robot_name)_commands</td>
</tr>
<tr class="row-odd"><td>launch_driver</td>
<td>true if the <cite>xsarm_control.launch</cite> file should be launched - set to false if you would like to run your own version of this file separately</td>
<td>true</td>
</tr>
<tr class="row-even"><td>use_sim</td>
<td>if true, the Dynamixel simulator node is run; use RViz to visualize the robot’s motion; if false, the real Dynamixel driver node is run</td>
<td>false</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this heading"></a></h2>
<p>There is a bag file in the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/blob/main/interbotix_ros_xsarms/examples/interbotix_xsarm_puppet/bag" rel="noopener noreferrer" target="_blank">bag</a> directory. It was created using the ‘record/playback’ feature
with the WidowX 250 arm. See if you can figure out what it does! As a hint, it involves rubber
ducks. To run it in simulation, type…</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch interbotix_xsarm_puppet xsarm_puppet_single.launch robot_model:<span class="o">=</span>wx250 use_sim:<span class="o">=</span><span class="nb">true</span> playback:<span class="o">=</span><span class="nb">true</span> bag_name:<span class="o">=</span>duck_dunk
</pre></div>
</div>
</div>
<div class="section" id="video-tutorial">
<h2>Video Tutorial<a class="headerlink" href="#video-tutorial" title="Permalink to this heading"></a></h2>
<div class="section" id="record-playback-x-series-arm-demo">
<h3>Record &amp; Playback X-Series Arm Demo<a class="headerlink" href="#record-playback-x-series-arm-demo" title="Permalink to this heading"></a></h3>
<div class="video_wrapper align-center" style="padding-bottom: 39.375000%; padding-top: 30px; position: relative; text-align: center; width: 70%">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/uHEyd6nuYzI" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="joystick_control.html" class="btn btn-neutral float-left" title="Joystick Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="arm_diagnostic_tool.html" class="btn btn-neutral float-right" title="Arm Diagnostic Tool" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Luke Schmitt.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <!-- Socials -->
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>