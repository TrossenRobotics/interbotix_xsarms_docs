<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Record And Playback &mdash; Interbotix X-Series Arms Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_collapse.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tr_style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Troubleshooting" href="../troubleshooting.html" />
    <link rel="prev" title="Joystick Control" href="joystick_control.html" />
   
  <script type="text/javascript">
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "nglikgkapv");
  </script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
  <div class="sidebartitle-docs-home">
    <a href="https://docs.trossenrobotics.com/" target="_blank" class="icon icon-home">
      &nbsp;Trossen Robotics Docs Home
    </a>
    <div class="sidebartitle-docs-home-hr">
      <hr>
    </div>
  </div>
  

          
          
          <a href="../index.html">
            
              <img src="../_static/logo_xsarms.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros_interface.html">ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_ros_interface.html">Python-ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab_ros_interface.html">MATLAB-ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros1_packages.html">ROS 1 Open Source Packages</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ros2_packages.html">ROS 2 Open Source Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="arm_descriptions.html">Arm Descriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="arm_control.html">Arm Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulation_configuration.html">Simulation Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_control.html">ROS 2 Controllers Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_motion_planning_configuration.html">MoveIt 2 Motion Planning Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="perception_pipeline_configuration.html">Perception Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_interface_and_api.html">MoveIt2 Interface and API</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_demos.html">Python Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="joystick_control.html">Joystick Control</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Record And Playback</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Interbotix X-Series Manipulators Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../ros2_packages.html">ROS 2 Open Source Packages</a></li>
      <li class="breadcrumb-item active">Record And Playback</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TrossenRobotics/interbotix_xsarms_docs/blob/main/docs/ros2_packages/record_and_playback.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="record-and-playback">
<h1>Record And Playback<a class="headerlink" href="#record-and-playback" title="Permalink to this headline"></a></h1>
<a href="https://github.com/Interbotix/interbotix_ros_manipulators/tree/rolling/interbotix_ros_xsarms/examples/interbotix_xsarm_puppet"
    class="docs-view-on-github-button"
    target="_blank">
    <img src="../_static/GitHub-Mark-Light-32px.png"
        class="docs-view-on-github-button-gh-logo">
    View Package on GitHub
</a><div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>Imagine that you would like to have the robot arm perform some motions to achieve a specific task.
One way of doing this would be to create a <a class="reference external" href="http://docs.ros.org/latest/api/trajectory_msgs/html/msg/JointTrajectory.html" rel="noopener noreferrer" target="_blank">JointTrajectory</a> of desired joint positions at specific times which you could then command the robot.
Alternatively (and much less time consuming), you could manually manipulate the arm to do the specific motions and record them in a ROS bag file.
Then, you could ‘play back’ the bag file as many times as you like to repeat the motions on the same robot later.
This ‘record/playback’ feature is made possible by the <strong>xsarm_puppet_single</strong>.</p>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline"></a></h2>
<p>As shown below, the <cite>interbotix_xsarm_puppet</cite> package builds on top of the <cite>interbotix_xsarm_control</cite> package.
To get familiar with that package, please look at its README.
The nodes specific to this package are described below.</p>
<img alt="../_images/xsarm_puppet_single_flowchart1.png" class="align-center" src="../_images/xsarm_puppet_single_flowchart1.png" />
<p>The above diagram shows the structure for the ‘record/playback’ feature.
The two nodes involved are:</p>
<ul class="simple">
<li><strong>xsarm_puppet_single</strong> - responsible for reading the arm’s current joint states and publishing them as position commands to the <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/commands/joint_group</span></code> and <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/commands/joint_single</span></code> topics.
Conveniently, as the arm is torqued off so that the user can manipulate it, the joints will not act upon these commands</li>
<li><strong>record</strong> - responsible for recording the two topics mentioned above in a bag file so that they can be played back later</li>
<li><strong>play</strong> - responsible for playing back the bag file mentioned above with the arm in a torqued on state; the playback is delayed 3 seconds to give time for the <strong>xs_sdk</strong> node to load</li>
</ul>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h2>
<p>To record joint commands while manipulating a single robot (let’s say the PincherX-150), type the following in a terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>launch<span class="w"> </span>interbotix_xsarm_puppet<span class="w"> </span>xsarm_puppet_single.launch.py<span class="w"> </span>robot_model:<span class="o">=</span>px150<span class="w"> </span>record_or_playback:<span class="o">=</span>record
</pre></div>
</div>
<p>Once the nodes finish launching, manually manipulate the arm and gripper through your desired motions.
When done, return the robot to its initial starting position and <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">C</kbd> the nodes so that rosbag stops recording.
By default, the bag file will be saved in the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/blob/rolling/interbotix_ros_xsarms/examples/interbotix_xsarm_puppet/bag" rel="noopener noreferrer" target="_blank">bag</a> directory.
To playback the motion, type the following in the terminal:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>launch<span class="w"> </span>interbotix_xsarm_puppet<span class="w"> </span>xsarm_puppet_single.launch.py<span class="w"> </span>robot_model:<span class="o">=</span>px150<span class="w"> </span>record_or_playback:<span class="o">=</span>playback
</pre></div>
</div>
<p>If you specified a custom bag file name, make sure to include the name in the above command as well.
When the bag file finishes playing, you can restart it by navigating to the directory where the bag file is located and in a terminal, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ros2<span class="w"> </span>bag<span class="w"> </span>play<span class="w"> </span>&lt;/path/to/bag&gt;
</pre></div>
</div>
<p>The robot should now repeat the motions.
When done, <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">C</kbd> to stop all nodes.
To see other command line arguments for the ‘xsarm_puppet_single.launch.py’ file, refer to the table below.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="17%" />
<col width="50%" />
<col width="17%" />
<col width="17%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Default</th>
<th class="head">Choices</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>robot_model</td>
<td>model type of the Interbotix Arm such as <code class="docutils literal notranslate"><span class="pre">wx200</span></code> or <code class="docutils literal notranslate"><span class="pre">rx150</span></code>.</td>
<td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">px100</span></code>, <code class="docutils literal notranslate"><span class="pre">px150</span></code>, <code class="docutils literal notranslate"><span class="pre">rx150</span></code>, <code class="docutils literal notranslate"><span class="pre">rx200</span></code>, <code class="docutils literal notranslate"><span class="pre">wx200</span></code>, <code class="docutils literal notranslate"><span class="pre">wx250</span></code>, <code class="docutils literal notranslate"><span class="pre">wx250s</span></code>, <code class="docutils literal notranslate"><span class="pre">vx250</span></code>, <code class="docutils literal notranslate"><span class="pre">vx300</span></code>, <code class="docutils literal notranslate"><span class="pre">vx300s</span></code>, <code class="docutils literal notranslate"><span class="pre">mobile_px100</span></code>, <code class="docutils literal notranslate"><span class="pre">mobile_wx200</span></code>, <code class="docutils literal notranslate"><span class="pre">mobile_wx250s</span></code>, <code class="docutils literal notranslate"><span class="pre">aloha_wx250s</span></code>, <code class="docutils literal notranslate"><span class="pre">aloha_vx300s</span></code></td>
</tr>
<tr class="row-odd"><td>robot_name</td>
<td>name of the robot (typically equal to <code class="docutils literal notranslate"><span class="pre">robot_model</span></code>, but could be anything).</td>
<td>LaunchConfig(<code class="docutils literal notranslate"><span class="pre">robot_model</span></code>)</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>use_rviz</td>
<td>launches RViz if set to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td>record_or_playback</td>
<td>‘record’ to record joint commands while physically manipulating the arm to a bagfile or ‘playback’ to play-back joint commands from a bagfile to a torqued on arm.</td>
<td>&#160;</td>
<td><code class="docutils literal notranslate"><span class="pre">record</span></code>, <code class="docutils literal notranslate"><span class="pre">playback</span></code></td>
</tr>
<tr class="row-even"><td>bag_name</td>
<td>Desired ROS bag file name.</td>
<td>LaunchConfig(<code class="docutils literal notranslate"><span class="pre">robot_name</span></code>) + ‘_commands’</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>launch_driver</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code> if xsarm_control should be launched - set to <code class="docutils literal notranslate"><span class="pre">false</span></code> if you would like to run your own version of this file separately.</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>xs_driver_logging_level</td>
<td>set the logging level of the X-Series Driver.</td>
<td><code class="docutils literal notranslate"><span class="pre">INFO</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">DEBUG</span></code>, <code class="docutils literal notranslate"><span class="pre">INFO</span></code>, <code class="docutils literal notranslate"><span class="pre">WARN</span></code>, <code class="docutils literal notranslate"><span class="pre">ERROR</span></code>, <code class="docutils literal notranslate"><span class="pre">FATAL</span></code></td>
</tr>
<tr class="row-odd"><td>use_sim</td>
<td>if <code class="docutils literal notranslate"><span class="pre">true</span></code>, the DYNAMIXEL simulator node is run; use RViz to visualize the robot’s motion; if <code class="docutils literal notranslate"><span class="pre">false</span></code>, the real DYNAMIXEL driver node is run.</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>base_link_frame</td>
<td>name of the ‘root’ link on the arm; typically <code class="docutils literal notranslate"><span class="pre">base_link</span></code>, but can be changed if attaching the arm to a mobile base that already has a <code class="docutils literal notranslate"><span class="pre">base_link</span></code> frame.</td>
<td><code class="docutils literal notranslate"><span class="pre">base_link</span></code></td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>use_gripper</td>
<td>if <code class="docutils literal notranslate"><span class="pre">true</span></code>, the default gripper is included in the <code class="docutils literal notranslate"><span class="pre">robot_description</span></code>; if <code class="docutils literal notranslate"><span class="pre">false</span></code>, it is left out; set to <code class="docutils literal notranslate"><span class="pre">false</span></code> if not using the default gripper.</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>show_ar_tag</td>
<td>if <code class="docutils literal notranslate"><span class="pre">true</span></code>, the AR tag mount is included in the <code class="docutils literal notranslate"><span class="pre">robot_description</span></code>; if <code class="docutils literal notranslate"><span class="pre">false</span></code>, it is left out; set to <code class="docutils literal notranslate"><span class="pre">true</span></code> if using the AR tag mount in your project.</td>
<td><code class="docutils literal notranslate"><span class="pre">false</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td>show_gripper_bar</td>
<td>if <code class="docutils literal notranslate"><span class="pre">true</span></code>, the gripper_bar link is included in the <code class="docutils literal notranslate"><span class="pre">robot_description</span></code>; if <code class="docutils literal notranslate"><span class="pre">false</span></code>, the gripper_bar and finger links are not loaded. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> if you have a custom gripper attachment.</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>show_gripper_fingers</td>
<td>if <code class="docutils literal notranslate"><span class="pre">true</span></code>, the gripper fingers are included in the <code class="docutils literal notranslate"><span class="pre">robot_description</span></code>; if <code class="docutils literal notranslate"><span class="pre">false</span></code>, the gripper finger links are not loaded. Set to <code class="docutils literal notranslate"><span class="pre">false</span></code> if you have custom gripper fingers.</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-odd"><td>use_world_frame</td>
<td>set this to <code class="docutils literal notranslate"><span class="pre">true</span></code> if you would like to load a ‘world’ frame to the <code class="docutils literal notranslate"><span class="pre">robot_description</span></code> which is located exactly at the ‘base_link’ frame of the robot; if using multiple robots or if you would like to attach the ‘base_link’ frame of the robot to a different frame, set this to <code class="docutils literal notranslate"><span class="pre">false</span></code>.</td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">true</span></code>, <code class="docutils literal notranslate"><span class="pre">false</span></code></td>
</tr>
<tr class="row-even"><td>external_urdf_loc</td>
<td>the file path to the custom urdf.xacro file that you would like to include in the Interbotix robot’s urdf.xacro file.</td>
<td>‘’</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>hardware_type</td>
<td>configures the <code class="docutils literal notranslate"><span class="pre">robot_description</span></code> to use the actual hardware, fake hardware, or hardware simulated in Gazebo.</td>
<td><code class="docutils literal notranslate"><span class="pre">actual</span></code></td>
<td><code class="docutils literal notranslate"><span class="pre">actual</span></code>, <code class="docutils literal notranslate"><span class="pre">fake</span></code>, <code class="docutils literal notranslate"><span class="pre">gz_classic</span></code></td>
</tr>
<tr class="row-even"><td>robot_description</td>
<td>URDF of the robot; this is typically generated by the xacro command.</td>
<td>Command(FindExec(<code class="docutils literal notranslate"><span class="pre">xacro</span></code>) + ‘ ‘ + LocalVar(‘FindPackageShare(pkg= <code class="docutils literal notranslate"><span class="pre">interbotix_xsarm_descriptions</span></code>) + ‘urdf’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">robot_model</span></code>)’) + ‘.urdf.xacro ‘ + ‘robot_name:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">robot_name</span></code>) + ‘ ‘ + ‘base_link_frame:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">base_link_frame</span></code>) + ‘ ‘ + ‘use_gripper:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">use_gripper</span></code>) + ‘ ‘ + ‘show_ar_tag:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">show_ar_tag</span></code>) + ‘ ‘ + ‘show_gripper_bar:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">show_gripper_bar</span></code>) + ‘ ‘ + ‘show_gripper_fingers:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">show_gripper_fingers</span></code>) + ‘ ‘ + ‘use_world_frame:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">use_world_frame</span></code>) + ‘ ‘ + ‘external_urdf_loc:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">external_urdf_loc</span></code>) + ‘ ‘ + ‘hardware_type:=’ + LaunchConfig(<code class="docutils literal notranslate"><span class="pre">hardware_type</span></code>) + ‘ ‘)</td>
<td>&#160;</td>
</tr>
</tbody>
</table>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="joystick_control.html" class="btn btn-neutral float-left" title="Joystick Control" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../troubleshooting.html" class="btn btn-neutral float-right" title="Troubleshooting" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Trossen Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>