<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Arm Diagnostic Tool &mdash; Interbotix X-Series Arms Documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_collapse.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/tr_style.css" type="text/css" />
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Arm Diagnostic Listener" href="arm_diagnostic_listener.html" />
    <link rel="prev" title="Record And Playback" href="record_and_playback.html" />
   
  <!-- Google Tag Manager (noscript) -->
  <noscript>
    <iframe
    src="https://www.googletagmanager.com/ns.html?id=GTM-PZQLS2V"
    height="0"
    width="0"
    style="display:none;visibility:hidden">
    </iframe>
  </noscript>
  <!-- End Google Tag Manager (noscript) -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html">
            <img src="../_static/logo_xsarms.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../specifications.html">Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ros_interface.html">ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../python_ros_interface.html">Python-ROS Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../matlab_ros_interface.html">MATLAB-ROS Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../ros1_packages.html">ROS 1 Open Source Packages</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="arm_descriptions.html">Arm Descriptions</a></li>
<li class="toctree-l2"><a class="reference internal" href="arm_control.html">Arm Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="gazebo_simulation_configuration.html">Gazebo Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ros_control.html">ROS Controllers Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_motion_planning_configuration.html">MoveIt Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="perception_pipeline_configuration.html">Perception Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="moveit_interface_and_api.html">MoveIt Interface and API</a></li>
<li class="toctree-l2"><a class="reference internal" href="python_demos.html">Python Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="matlab_demos.html">MATLAB Demos</a></li>
<li class="toctree-l2"><a class="reference internal" href="joystick_control.html">Joystick Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="record_and_playback.html">Record And Playback</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Arm Diagnostic Tool</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#structure">Structure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#notes">Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#video-tutorial">Video Tutorial</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#diagnostic-tool-x-series-arm-demo">Diagnostic Tool X-Series Arm Demo</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="arm_diagnostic_listener.html">Arm Diagnostic Listener</a></li>
<li class="toctree-l2"><a class="reference internal" href="pid_gains_test_environment.html">PID Gains Test Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="arm_puppeteering.html">Arm Puppeteering</a></li>
<li class="toctree-l2"><a class="reference internal" href="dual_arm_control.html">Dual Arm Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="dual_arm_joystick_control.html">Dual Arm Joystick Control</a></li>
<li class="toctree-l2"><a class="reference internal" href="../ros1_packages.html#contributing">Contributing</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../ros2_packages.html">ROS 2 Open Source Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Interbotix X-Series Manipulators Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../ros1_packages.html">ROS 1 Open Source Packages</a></li>
      <li class="breadcrumb-item active">Arm Diagnostic Tool</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/TrossenRobotics/interbotix_xsarms_docs/blob/main/ros1_packages/arm_diagnostic_tool.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="arm-diagnostic-tool">
<h1>Arm Diagnostic Tool<a class="headerlink" href="#arm-diagnostic-tool" title="Permalink to this headline"></a></h1>
<a href="https://github.com/Interbotix/interbotix_ros_manipulators/tree/main/interbotix_ros_xsarms/examples/interbotix_xsarm_diagnostic_tool"
  class="docs-view-on-github-button"
  target="_blank">
  <img src="../_static/GitHub-Mark-Light-32px.png"
      class="docs-view-on-github-button-gh-logo">
    View Package on GitHub
</a><div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>This package is meant to be used as a way to analyze joint data over time. For example, if the user
would like the arm to perform a certain task but is not sure if it will ‘strain’ a specific arm
joint too much, then this tool would be an easy way to record, save (to a rosbag and CSV file), and
view data live while the joint in question rotates.</p>
</div>
<div class="section" id="structure">
<h2>Structure<a class="headerlink" href="#structure" title="Permalink to this headline"></a></h2>
<img alt="../_images/xsarm_diagnostic_tool_flowchart.png" class="align-center" src="../_images/xsarm_diagnostic_tool_flowchart.png" style="width: 70%;" />
<p>As shown above, the <cite>interbotix_xsarm_diagnostic_tool</cite> package builds on top of the
<cite>interbotix_xsarm_control</cite> package. To get pointers about the nodes in the that package, please
look at its README. The other nodes are described below:</p>
<ul class="simple">
<li><strong>xsarm_diagnostic_tool</strong> - responsible for commanding joint positions to the user-specified
joint following a sinusoidal trajectory; the trajectory is symmetric around ‘0’ radians where
the upper bound is the minimum of the absolute value of the upper and lower joint limits. It
also publishes temperatures at all the arm joints (excluding gripper) to the
<code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/temperatures/joint_group</span></code> topic.</li>
<li><strong>record</strong> - responsible for recording the <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/commands/joint_single</span></code>,
<code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/joint_states</span></code>, and <code class="docutils literal notranslate"><span class="pre">/&lt;robot_name&gt;/temperatures/joint_group</span></code> topics and
saving it to a user-specified bagfile</li>
<li><strong>rqt_plot</strong> - three instances of this node are launched to plot data for a user-specified
joint; one plots the joint commands along with the observed joint positions [rad] and
velocities [rad/s] vs. time [s]. Another plots effort [mA] vs time [s], while the last one
plots joint temperature [C] vs. time [s].</li>
</ul>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline"></a></h2>
<p>To use this package, first manually manipulate the arm (let’s say the PincherX-150) until the
desired starting pose is reached. Then type the command below (if testing the waist joint):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>roslaunch interbotix_xsarm_diagnostic_tool xsarm_diagnostic_tool.launch robot_model:<span class="o">=</span>px150 cmd_joint:<span class="o">=</span>waist observe_joint:<span class="o">=</span>waist bag_name:<span class="o">=</span>px150_diagnostics
</pre></div>
</div>
<p>Keep holding the arm until the motors torque on. At this point, let go of the arm. Since the
cmd_joint argument is waist, this means that the ‘waist’ joint will begin to rotate following a
sinusoidal trajectory. Additionally, since the observe_joint argument is waist, the plots will
start showing data for the ‘waist’ joint only. The plot axes might have to be adjusted to visualize
the data properly. The joint will then continue to rotate for the user-specified time (see the
launch file argument table below) at which point the arm will go to its ‘sleep’ pose and the
<cite>xsarm_diagnostic_tool</cite> node will terminate. Finally, the user should <kbd class="kbd docutils literal notranslate">Ctrl</kbd> + <kbd class="kbd docutils literal notranslate">C</kbd> the
launch file so that rosbag will stop recording data.</p>
<p>To convert the <cite>rosbag</cite> data to a csv file, navigate to the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/tree/main/interbotix_ros_xsarms/examples/interbotix_xsarm_diagnostic_tool/scripts" rel="noopener noreferrer" target="_blank">scripts</a> directory. If the
‘bag2csv.py’ program is not yet executable, make it so by typing:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>chmod a+x bag2csv.py
</pre></div>
</div>
<p>Next, type:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python bag2csv.py px150 waist px150_diagnostics.bag px150_diagnostics.csv
</pre></div>
</div>
<p>The command is pretty self explanatory - the arguments are the robot name, the name of the joint to
be observed, the bagfile name (the program expects it to be located in the ‘bag’ directory), and
the desired CSV file name. To better understand how this program works, take a look at
<a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/blob/main/interbotix_ros_xsarms/examples/interbotix_xsarm_diagnostic_tool/scripts/bag2csv.py" rel="noopener noreferrer" target="_blank">bag2csv.py</a>. Then, take a look at the table below to understand the launch file arguments.</p>
<table border="1" class="colwidths-given docutils align-default">
<colgroup>
<col width="20%" />
<col width="60%" />
<col width="20%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Description</th>
<th class="head">Default Value</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>robot_model</td>
<td>model type of the Interbotix Arm such as ‘wx200’ or ‘rx150’</td>
<td>“”</td>
</tr>
<tr class="row-odd"><td>robot_name</td>
<td>name of the robot (typically equal to <code class="docutils literal notranslate"><span class="pre">robot_model</span></code>, but could be anything)</td>
<td>“$(arg robot_model)”</td>
</tr>
<tr class="row-even"><td>base_link_frame</td>
<td>name of the ‘root’ link on the arm; typically ‘base_link’, but can be changed if attaching the arm to a mobile base that already has a ‘base_link’ frame</td>
<td>‘base_link’</td>
</tr>
<tr class="row-odd"><td>use_rviz</td>
<td>launches RViz</td>
<td>true</td>
</tr>
<tr class="row-even"><td>mode_configs</td>
<td>the file path to the ‘mode config’ YAML file</td>
<td>refer to <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/blob/main/interbotix_ros_xsarms/examples/interbotix_xsarm_diagnostic_tool/launch/xsarm_diagnostic_tool.launch" rel="noopener noreferrer" target="_blank">xsarm_diagnostic_tool.launch</a></td>
</tr>
<tr class="row-odd"><td>cmd_joint</td>
<td>name of the joint to rotate</td>
<td>waist</td>
</tr>
<tr class="row-even"><td>observe_joint</td>
<td>name of the joint for which to plot data (doesn’t have to be the same as <code class="docutils literal notranslate"><span class="pre">cmd_joint</span></code>)</td>
<td>waist</td>
</tr>
<tr class="row-odd"><td>test_duration</td>
<td>duration of test in seconds</td>
<td>600</td>
</tr>
<tr class="row-even"><td>bag_name</td>
<td>name of the <cite>rosbag</cite> for which to save data</td>
<td>“$(arg observe_joint)_diagnostics”</td>
</tr>
<tr class="row-odd"><td>use_rqt</td>
<td>whether or not the rqt plots (with preloaded topics) should be launched</td>
<td>true</td>
</tr>
<tr class="row-even"><td>launch_driver</td>
<td>true if the xsarm_control.launch file should be launched - set to false if you would like to run your own version of this file separately</td>
<td>true</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="notes">
<h2>Notes<a class="headerlink" href="#notes" title="Permalink to this headline"></a></h2>
<p>If choosing to rotate the ‘waist’ joint, make sure during the initial step of manually positioning
the arm that it is NOT rotated past the joint limit (+/-180 degrees). Otherwise, the cable
connecting the ‘waist’ motor to the ‘shoulder’ motor(s) can be ripped out.</p>
<p>Also, take a note of the <a class="reference external" href="https://github.com/Interbotix/interbotix_ros_manipulators/blob/main/interbotix_ros_xsarms/examples/interbotix_xsarm_diagnostic_tool/data" rel="noopener noreferrer" target="_blank">data</a> directory in the package. After plotting and saving the data to a
CSV, it might be a good idea to create a new directory to keep all the files together. In this
case, the CSV file and picture in that directory show diagnostics for the waist joint of the WidowX
200 arm as it rotates for 100 seconds.</p>
</div>
<div class="section" id="video-tutorial">
<h2>Video Tutorial<a class="headerlink" href="#video-tutorial" title="Permalink to this headline"></a></h2>
<div class="section" id="diagnostic-tool-x-series-arm-demo">
<h3>Diagnostic Tool X-Series Arm Demo<a class="headerlink" href="#diagnostic-tool-x-series-arm-demo" title="Permalink to this headline"></a></h3>
<div class="video_wrapper align-center" style="padding-bottom: 39.375000%; padding-top: 30px; position: relative; text-align: center; width: 70%">
<iframe allowfullscreen="true" src="https://www.youtube.com/embed/0N85vMS8LMU" style="border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%">
</iframe></div></div>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="record_and_playback.html" class="btn btn-neutral float-left" title="Record And Playback" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="arm_diagnostic_listener.html" class="btn btn-neutral float-right" title="Arm Diagnostic Listener" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Trossen Robotics.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
    <!-- Socials -->
     


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>